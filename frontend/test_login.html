<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>VHM24R - –¢–µ—Å—Ç –≤—Ö–æ–¥–∞</title>
    <script src="https://cdn.tailwindcss.com"></script>
</head>
<body class="min-h-screen flex items-center justify-center bg-gray-50">
    <div class="max-w-md w-full space-y-8">
        <div>
            <div class="mx-auto h-12 w-12 flex items-center justify-center rounded-full bg-blue-100">
                <span class="text-2xl">üîê</span>
            </div>
            <h2 class="mt-6 text-center text-3xl font-extrabold text-gray-900">
                VHM24R Order Management
            </h2>
            <p class="mt-2 text-center text-sm text-gray-600">
                –°–∏—Å—Ç–µ–º–∞ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∑–∞–∫–∞–∑–∞–º–∏
            </p>
        </div>

        <!-- –û–±—ã—á–Ω–∞—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è -->
        <div class="bg-white rounded-lg shadow p-6">
            <div class="text-center mb-6">
                <div class="mx-auto h-16 w-16 flex items-center justify-center rounded-full bg-green-500 mb-4">
                    <span class="text-white text-2xl">üîë</span>
                </div>
                <h3 class="text-lg font-medium text-gray-900 mb-2">
                    –í—Ö–æ–¥ –≤ —Å–∏—Å—Ç–µ–º—É
                </h3>
                <p class="text-sm text-gray-500">
                    –í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω –∏ –ø–∞—Ä–æ–ª—å –¥–ª—è –¥–æ—Å—Ç—É–ø–∞
                </p>
            </div>
            
            <form id="loginForm" class="space-y-4">
                <div>
                    <label for="username" class="block text-sm font-medium text-gray-700">
                        –õ–æ–≥–∏–Ω
                    </label>
                    <input
                        id="username"
                        name="username"
                        type="text"
                        required
                        class="mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –ª–æ–≥–∏–Ω"
                        value="admin"
                    />
                </div>
                
                <div>
                    <label for="password" class="block text-sm font-medium text-gray-700">
                        –ü–∞—Ä–æ–ª—å
                    </label>
                    <input
                        id="password"
                        name="password"
                        type="password"
                        required
                        class="mt-1 appearance-none relative block w-full px-3 py-2 border border-gray-300 placeholder-gray-500 text-gray-900 rounded-md focus:outline-none focus:ring-blue-500 focus:border-blue-500 focus:z-10 sm:text-sm"
                        placeholder="–í–≤–µ–¥–∏—Ç–µ –ø–∞—Ä–æ–ª—å"
                        value="admin123"
                    />
                </div>
                
                <div>
                    <button
                        type="submit"
                        id="loginBtn"
                        class="group relative w-full flex justify-center py-2 px-4 border border-transparent text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed"
                    >
                        –í–æ–π—Ç–∏
                    </button>
                </div>
                
                <div id="errorMessage" class="text-red-600 text-sm text-center hidden"></div>
                <div id="successMessage" class="text-green-600 text-sm text-center hidden"></div>
            </form>
            
            <div class="mt-4 text-center">
                <p class="text-xs text-gray-500">
                    –¢–µ—Å—Ç–æ–≤—ã–µ –¥–∞–Ω–Ω—ã–µ: admin / admin123
                </p>
            </div>
        </div>

        <!-- –°—Å—ã–ª–∫–∞ –Ω–∞ Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ -->
        <div class="text-center">
            <a href="http://localhost:5173" class="text-blue-600 hover:text-blue-800 text-sm">
                –ü–µ—Ä–µ–π—Ç–∏ –∫ Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—é
            </a>
        </div>
    </div>

    <script>
        document.getElementById('loginForm').addEventListener('submit', async (e) => {
            e.preventDefault();
            
            const username = document.getElementById('username').value;
            const password = document.getElementById('password').value;
            const loginBtn = document.getElementById('loginBtn');
            const errorMessage = document.getElementById('errorMessage');
            const successMessage = document.getElementById('successMessage');
            
            // –°–∫—Ä—ã–≤–∞–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è
            errorMessage.classList.add('hidden');
            successMessage.classList.add('hidden');
            
            // –ü–æ–∫–∞–∑—ã–≤–∞–µ–º –∑–∞–≥—Ä—É–∑–∫—É
            loginBtn.disabled = true;
            loginBtn.textContent = '–í—Ö–æ–¥...';
            
            try {
                const response = await fetch('http://localhost:8000/api/v1/auth/login', {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json',
                    },
                    body: JSON.stringify({
                        username: username,
                        password: password
                    })
                });
                
                const data = await response.json();
                
                if (response.ok) {
                    // –£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥
                    localStorage.setItem('token', data.access_token);
                    localStorage.setItem('user', JSON.stringify(data.user));
                    
                    successMessage.textContent = '–£—Å–ø–µ—à–Ω—ã–π –≤—Ö–æ–¥! –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª–µ–Ω–∏–µ...';
                    successMessage.classList.remove('hidden');
                    
                    // –ü–µ—Ä–µ–Ω–∞–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ Vue –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
                    setTimeout(() => {
                        window.location.href = 'http://localhost:5173';
                    }, 1000);
                } else {
                    // –û—à–∏–±–∫–∞ –≤—Ö–æ–¥–∞
                    errorMessage.textContent = data.detail || '–ù–µ–≤–µ—Ä–Ω—ã–π –ª–æ–≥–∏–Ω –∏–ª–∏ –ø–∞—Ä–æ–ª—å';
                    errorMessage.classList.remove('hidden');
                }
            } catch (error) {
                errorMessage.textContent = '–û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ —Å–µ—Ä–≤–µ—Ä—É';
                errorMessage.classList.remove('hidden');
            } finally {
                loginBtn.disabled = false;
                loginBtn.textContent = '–í–æ–π—Ç–∏';
            }
        });
    </script>
</body>
</html>
